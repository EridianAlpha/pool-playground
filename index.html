<!DOCTYPE HTML>
<html lang="en" class="dark" dir="ltr">
    <head>
        <!-- Book generated using mdBook -->
        <meta charset="UTF-8">
        <title>README - Pool Playground</title>


        <!-- Custom HTML head -->
        
        <meta name="description" content="">
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <meta name="theme-color" content="#ffffff">

        <link rel="icon" href="favicon.svg">
        <link rel="shortcut icon" href="favicon.png">
        <link rel="stylesheet" href="css/variables.css">
        <link rel="stylesheet" href="css/general.css">
        <link rel="stylesheet" href="css/chrome.css">
        <link rel="stylesheet" href="css/print.css" media="print">

        <!-- Fonts -->
        <link rel="stylesheet" href="FontAwesome/css/font-awesome.css">
        <link rel="stylesheet" href="fonts/fonts.css">

        <!-- Highlight.js Stylesheets -->
        <link rel="stylesheet" href="highlight.css">
        <link rel="stylesheet" href="tomorrow-night.css">
        <link rel="stylesheet" href="ayu-highlight.css">

        <!-- Custom theme stylesheets -->
        <link rel="stylesheet" href="book.css">

    </head>
    <body class="sidebar-visible no-js">
    <div id="body-container">
        <!-- Provide site root to javascript -->
        <script>
            var path_to_root = "";
            var default_theme = window.matchMedia("(prefers-color-scheme: dark)").matches ? "ayu" : "dark";
        </script>

        <!-- Work around some values being stored in localStorage wrapped in quotes -->
        <script>
            try {
                var theme = localStorage.getItem('mdbook-theme');
                var sidebar = localStorage.getItem('mdbook-sidebar');

                if (theme.startsWith('"') && theme.endsWith('"')) {
                    localStorage.setItem('mdbook-theme', theme.slice(1, theme.length - 1));
                }

                if (sidebar.startsWith('"') && sidebar.endsWith('"')) {
                    localStorage.setItem('mdbook-sidebar', sidebar.slice(1, sidebar.length - 1));
                }
            } catch (e) { }
        </script>

        <!-- Set the theme before any content is loaded, prevents flash -->
        <script>
            var theme;
            try { theme = localStorage.getItem('mdbook-theme'); } catch(e) { }
            if (theme === null || theme === undefined) { theme = default_theme; }
            var html = document.querySelector('html');
            html.classList.remove('dark')
            html.classList.add(theme);
            var body = document.querySelector('body');
            body.classList.remove('no-js')
            body.classList.add('js');
        </script>

        <input type="checkbox" id="sidebar-toggle-anchor" class="hidden">

        <!-- Hide / unhide sidebar before it is displayed -->
        <script>
            var body = document.querySelector('body');
            var sidebar = null;
            var sidebar_toggle = document.getElementById("sidebar-toggle-anchor");
            if (document.body.clientWidth >= 1080) {
                try { sidebar = localStorage.getItem('mdbook-sidebar'); } catch(e) { }
                sidebar = sidebar || 'visible';
            } else {
                sidebar = 'hidden';
            }
            sidebar_toggle.checked = sidebar === 'visible';
            body.classList.remove('sidebar-visible');
            body.classList.add("sidebar-" + sidebar);
        </script>

        <nav id="sidebar" class="sidebar" aria-label="Table of contents">
            <div class="sidebar-scrollbox">
                <ol class="chapter"><li class="chapter-item expanded affix "><a href="index.html" class="active">README</a></li><li class="chapter-item expanded "><a href="src/PoolPlayground.sol/contract.PoolPlayground.html"><strong aria-hidden="true">1.</strong> PoolPlayground</a></li><li class="chapter-item expanded "><a href="src/Token.sol/contract.Token.html"><strong aria-hidden="true">2.</strong> Token</a></li></ol>
            </div>
            <div id="sidebar-resize-handle" class="sidebar-resize-handle">
                <div class="sidebar-resize-indicator"></div>
            </div>
        </nav>

        <!-- Track and set sidebar scroll position -->
        <script>
            var sidebarScrollbox = document.querySelector('#sidebar .sidebar-scrollbox');
            sidebarScrollbox.addEventListener('click', function(e) {
                if (e.target.tagName === 'A') {
                    sessionStorage.setItem('sidebar-scroll', sidebarScrollbox.scrollTop);
                }
            }, { passive: true });
            var sidebarScrollTop = sessionStorage.getItem('sidebar-scroll');
            sessionStorage.removeItem('sidebar-scroll');
            if (sidebarScrollTop) {
                // preserve sidebar scroll position when navigating via links within sidebar
                sidebarScrollbox.scrollTop = sidebarScrollTop;
            } else {
                // scroll sidebar to current active section when navigating via "next/previous chapter" buttons
                var activeSection = document.querySelector('#sidebar .active');
                if (activeSection) {
                    activeSection.scrollIntoView({ block: 'center' });
                }
            }
        </script>

        <div id="page-wrapper" class="page-wrapper">

            <div class="page">
                                <div id="menu-bar-hover-placeholder"></div>
                <div id="menu-bar" class="menu-bar sticky">
                    <div class="left-buttons">
                        <label id="sidebar-toggle" class="icon-button" for="sidebar-toggle-anchor" title="Toggle Table of Contents" aria-label="Toggle Table of Contents" aria-controls="sidebar">
                            <i class="fa fa-bars"></i>
                        </label>
                        <button id="theme-toggle" class="icon-button" type="button" title="Change theme" aria-label="Change theme" aria-haspopup="true" aria-expanded="false" aria-controls="theme-list">
                            <i class="fa fa-paint-brush"></i>
                        </button>
                        <ul id="theme-list" class="theme-popup" aria-label="Themes" role="menu">
                            <li role="none"><button role="menuitem" class="theme" id="light">Light</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="rust">Rust</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="coal">Coal</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="navy">Navy</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="ayu">Ayu</button></li>
                        </ul>
                        <button id="search-toggle" class="icon-button" type="button" title="Search. (Shortkey: s)" aria-label="Toggle Searchbar" aria-expanded="false" aria-keyshortcuts="S" aria-controls="searchbar">
                            <i class="fa fa-search"></i>
                        </button>
                    </div>

                    <h1 class="menu-title">Pool Playground</h1>

                    <div class="right-buttons">
                        <a href="print.html" title="Print this book" aria-label="Print this book">
                            <i id="print-button" class="fa fa-print"></i>
                        </a>
                        <a href="https://github.com/EridianAlpha/pool-playground" title="Git repository" aria-label="Git repository">
                            <i id="git-repository-button" class="fa fa-github"></i>
                        </a>

                    </div>
                </div>

                <div id="search-wrapper" class="hidden">
                    <form id="searchbar-outer" class="searchbar-outer">
                        <input type="search" id="searchbar" name="searchbar" placeholder="Search this book ..." aria-controls="searchresults-outer" aria-describedby="searchresults-header">
                    </form>
                    <div id="searchresults-outer" class="searchresults-outer hidden">
                        <div id="searchresults-header" class="searchresults-header"></div>
                        <ul id="searchresults">
                        </ul>
                    </div>
                </div>

                <!-- Apply ARIA attributes after the sidebar and the sidebar toggle button are added to the DOM -->
                <script>
                    document.getElementById('sidebar-toggle').setAttribute('aria-expanded', sidebar === 'visible');
                    document.getElementById('sidebar').setAttribute('aria-hidden', sidebar !== 'visible');
                    Array.from(document.querySelectorAll('#sidebar a')).forEach(function(link) {
                        link.setAttribute('tabIndex', sidebar === 'visible' ? 0 : -1);
                    });
                </script>

                <div id="content" class="content">
                    <main>
                        <h1 id="pool-playground"><a class="header" href="#pool-playground">Pool Playground</a></h1>
<ul>
<li><a href="#1-overview">1. Overview</a></li>
<li><a href="#2-installation">2. Installation</a>
<ul>
<li><a href="#21-clone-repository">2.1. Clone repository</a></li>
<li><a href="#22-install-dependencies">2.2. Install Dependencies</a></li>
<li><a href="#23-create-the-env-file">2.3. Create the <code>.env</code> file</a></li>
</ul>
</li>
<li><a href="#3-testing">3. Testing</a>
<ul>
<li><a href="#31-tests">3.1. Tests</a></li>
<li><a href="#32-coverage">3.2. Coverage</a></li>
</ul>
</li>
<li><a href="#4-deployment">4. Deployment</a>
<ul>
<li><a href="#41-deploying-uniswap-v2-contracts-optional">4.1. Deploying Uniswap V2 Contracts (optional)</a></li>
<li><a href="#42-deploying-poolplayground-contract">4.2. Deploying PoolPlayground Contract</a></li>
</ul>
</li>
<li><a href="#5-interactions">5. Interactions</a>
<ul>
<li><a href="#51-deploy-playground-instance">5.1. Deploy Playground Instance</a></li>
</ul>
</li>
<li><a href="#6-bugs-and-feature-requests">6. Bugs and Feature Requests</a>
<ul>
<li><a href="#61-bugs">6.1. Bugs</a></li>
<li><a href="#62-feature-requests">6.2. Feature Requests</a></li>
</ul>
</li>
<li><a href="#7-authors">7. Authors</a></li>
<li><a href="#8-license">8. License</a></li>
</ul>
<h2 id="1-overview"><a class="header" href="#1-overview">1. Overview</a></h2>
<p>An interactive educational playground for visualizing and learning Uniswap V2 mechanics by swapping testnet ERC20 tokens.</p>
<p>Learn all about Pool Playground <a href="https://pool.eridian.xyz/#about">here</a>.</p>
<p>Live on <a href="https://pool.eridian.xyz">https://pool.eridian.xyz</a></p>
<h2 id="2-installation"><a class="header" href="#2-installation">2. Installation</a></h2>
<h3 id="21-clone-repository"><a class="header" href="#21-clone-repository">2.1. Clone repository</a></h3>
<pre><code class="language-bash">git clone https://github.com/EridianAlpha/pool-playground.git
</code></pre>
<h3 id="22-install-dependencies"><a class="header" href="#22-install-dependencies">2.2. Install Dependencies</a></h3>
<p>This should happen automatically when first running a command, but the installation can be manually triggered with the following commands:</p>
<pre><code class="language-bash">git submodule init
git submodule update
make install
</code></pre>
<h3 id="23-create-the-env-file"><a class="header" href="#23-create-the-env-file">2.3. Create the <code>.env</code> file</a></h3>
<p>Use the <code>.env.example</code> file as a template to create a <code>.env</code> file.</p>
<h2 id="3-testing"><a class="header" href="#3-testing">3. Testing</a></h2>
<h3 id="31-tests"><a class="header" href="#31-tests">3.1. Tests</a></h3>
<pre><code class="language-bash">make test
make test-fork

make test-v
make test-v-fork

make test-summary
make test-summary-fork
</code></pre>
<h3 id="32-coverage"><a class="header" href="#32-coverage">3.2. Coverage</a></h3>
<pre><code class="language-bash">make coverage
make coverage-fork

make coverage-report
make coverage-report-fork
</code></pre>
<h2 id="4-deployment"><a class="header" href="#4-deployment">4. Deployment</a></h2>
<h3 id="41-deploying-uniswap-v2-contracts-optional"><a class="header" href="#41-deploying-uniswap-v2-contracts-optional">4.1. Deploying Uniswap V2 Contracts (optional)</a></h3>
<p>This step is optional and only necessary if you need to deploy the Uniswap V2 core contracts to a new chain. The Uniswap V2 core contracts have already been deployed on Mainnet (used for forks only), Holesky, Sepolia, Base Sepolia, Arbitrum Sepolia, and Optimism Sepolia chains. The addresses of these existing deployments can be found in the <code>.env.example</code> file.</p>
<p>Fork the Uniswap v2-periphery repository and modify the <code>v2-periphery/contracts/libraries/UniswapV2Library.sol</code> contract with the correct init code hash on line 24. Without changing this init code hash, the contract will not be able to calculate the correct pair address. There are a number of reasons why the init code hash changes, but the most likely reason is that the contract was deployed with a different compiler version or with different compiler settings.</p>
<p>You can try to configure your complier to match the settings of the original deployment, but this is not always possible. The best way to get the correct init code hash is to inspect the creation bytecode of the contract that you are using and manually change the init code hash.</p>
<pre><code class="language-bash"># Get the creation bytecode of the UniswapV2Pair contract
CREATION_BYTECODE=$(forge inspect lib/v2-core/contracts/UniswapV2Pair.sol:UniswapV2Pair bytecode)

# Calculate the init code hash of the UniswapV2Pair contract
cast keccak &quot;$CREATION_BYTECODE&quot;
0x0be7e5aaf721ce53efd2148867ffca974ca93687937cd12b66ab2acef87168ed

# Remove the 0x from the start and use that as the &quot;init code hash&quot;
# in `v2-periphery/contracts/libraries/UniswapV2Library.sol` line 24
0be7e5aaf721ce53efd2148867ffca974ca93687937cd12b66ab2acef87168ed

</code></pre>
<p>Once you have the correct init code hash updated in your own fork of the Uniswap v2-periphery repository, you can install it to your local environment.</p>
<pre><code class="language-bash"># Example of installing the EridianAlpha/v2-periphery repository with the modified init code hash
forge install EridianAlpha/v2-periphery --no-commit
</code></pre>
<p>After installing the modified Uniswap v2-periphery repository, you can deploy the Uniswap V2 Factory and Router02 contracts to the specified chain.</p>
<div class="table-wrapper"><table><thead><tr><th>Chain</th><th>Command</th></tr></thead><tbody>
<tr><td>Anvil</td><td><code>make deploy-uniswapV2-anvil</code></td></tr>
<tr><td>Holesky</td><td><code>make deploy-uniswapV2-ethereum-holesky</code></td></tr>
<tr><td>Sepolia</td><td><code>make deploy-uniswapV2-ethereum-sepolia</code></td></tr>
<tr><td>Base Sepolia</td><td><code>make deploy-uniswapV2-base-sepolia</code></td></tr>
<tr><td>Arbitrum Sepolia</td><td><code>make deploy-uniswapV2-arbitrum-sepolia</code></td></tr>
<tr><td>Optimism Sepolia</td><td><code>make deploy-uniswapV2-optimism-sepolia</code></td></tr>
</tbody></table>
</div>
<h3 id="42-deploying-poolplayground-contract"><a class="header" href="#42-deploying-poolplayground-contract">4.2. Deploying PoolPlayground Contract</a></h3>
<p>Deploys PoolPlayground to the specified chain.</p>
<div class="table-wrapper"><table><thead><tr><th>Chain</th><th>Command</th></tr></thead><tbody>
<tr><td>Anvil</td><td><code>make deploy anvil</code></td></tr>
<tr><td>Holesky</td><td><code>make deploy ethereum-holesky</code></td></tr>
<tr><td>Sepolia</td><td><code>make deploy ethereum-sepolia</code></td></tr>
<tr><td>Base Sepolia</td><td><code>make deploy base-sepolia</code></td></tr>
<tr><td>Arbitrum Sepolia</td><td><code>make deploy arbitrum-sepolia</code></td></tr>
<tr><td>Optimism Sepolia</td><td><code>make deploy optimism-sepolia</code></td></tr>
</tbody></table>
</div>
<h2 id="5-interactions"><a class="header" href="#5-interactions">5. Interactions</a></h2>
<p>Interactions are defined in <code>./script/Interactions.s.sol</code></p>
<p>If <code>DEPLOYED_CONTRACT_ADDRESS</code> is set in the <code>.env</code> file, that contract address will be used for interactions.
If that variable is not set, the latest deployment on the specified chain will be used.</p>
<h3 id="51-deploy-playground-instance"><a class="header" href="#51-deploy-playground-instance">5.1. Deploy Playground Instance</a></h3>
<p>Call the <code>deploy()</code> function on the PoolPlayground contract.
The input parameters are defined in the <code>Interactions.s.sol</code> script.</p>
<div class="table-wrapper"><table><thead><tr><th>Chain</th><th>Command</th></tr></thead><tbody>
<tr><td>Anvil</td><td><code>make deployPlaygroundInstance anvil</code></td></tr>
<tr><td>Holesky</td><td><code>make deployPlaygroundInstance ethereum-holesky</code></td></tr>
<tr><td>Sepolia</td><td><code>make deployPlaygroundInstance ethereum-sepolia</code></td></tr>
<tr><td>Base Sepolia</td><td><code>make deployPlaygroundInstance base-sepolia</code></td></tr>
<tr><td>Arbitrum Sepolia</td><td><code>make deployPlaygroundInstance arbitrum-sepolia</code></td></tr>
<tr><td>Optimism Sepolia</td><td><code>make deployPlaygroundInstance optimism-sepolia</code></td></tr>
</tbody></table>
</div>
<h2 id="6-bugs-and-feature-requests"><a class="header" href="#6-bugs-and-feature-requests">6. Bugs and Feature Requests</a></h2>
<p>If you encounter any bugs or have a feature request, please open an issue on GitHub. To help us resolve the issue, please provide the following information:</p>
<h3 id="61-bugs"><a class="header" href="#61-bugs">6.1. Bugs</a></h3>
<ul>
<li>A detailed description of the bug.</li>
<li>Steps to reproduce the bug.</li>
<li>Expected behavior and actual behavior.</li>
<li>Screenshots, if possible, and any additional context or information that may help us resolve the bug.</li>
<li>If you have a solution, suggestion, or code change, please submit a pull request.</li>
</ul>
<h3 id="62-feature-requests"><a class="header" href="#62-feature-requests">6.2. Feature Requests</a></h3>
<ul>
<li>For feature requests, questions, or feedback, please open an issue.</li>
<li>For security issues or general inquiries, please contact <a href="https://eridian.xyz">Eridian</a> privately.</li>
</ul>
<h2 id="7-authors"><a class="header" href="#7-authors">7. Authors</a></h2>
<ul>
<li><a href="https://eridian.xyz">Eridian</a></li>
</ul>
<h2 id="8-license"><a class="header" href="#8-license">8. License</a></h2>
<p><a href="https://choosealicense.com/licenses/mit/">MIT</a></p>

                    </main>

                    <nav class="nav-wrapper" aria-label="Page navigation">
                        <!-- Mobile navigation buttons -->

                            <a rel="next prefetch" href="src/PoolPlayground.sol/contract.PoolPlayground.html" class="mobile-nav-chapters next" title="Next chapter" aria-label="Next chapter" aria-keyshortcuts="Right">
                                <i class="fa fa-angle-right"></i>
                            </a>

                        <div style="clear: both"></div>
                    </nav>
                </div>
            </div>

            <nav class="nav-wide-wrapper" aria-label="Page navigation">

                    <a rel="next prefetch" href="src/PoolPlayground.sol/contract.PoolPlayground.html" class="nav-chapters next" title="Next chapter" aria-label="Next chapter" aria-keyshortcuts="Right">
                        <i class="fa fa-angle-right"></i>
                    </a>
            </nav>

        </div>




        <script>
            window.playground_copyable = true;
        </script>


        <script src="elasticlunr.min.js"></script>
        <script src="mark.min.js"></script>
        <script src="searcher.js"></script>

        <script src="clipboard.min.js"></script>
        <script src="highlight.js"></script>
        <script src="book.js"></script>

        <!-- Custom JS scripts -->
        <script src="solidity.min.js"></script>


    </div>
    </body>
</html>
