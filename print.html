<!DOCTYPE HTML>
<html lang="en" class="dark" dir="ltr">
    <head>
        <!-- Book generated using mdBook -->
        <meta charset="UTF-8">
        <title>Pool Playground</title>
        <meta name="robots" content="noindex">


        <!-- Custom HTML head -->
        
        <meta name="description" content="">
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <meta name="theme-color" content="#ffffff">

        <link rel="icon" href="favicon.svg">
        <link rel="shortcut icon" href="favicon.png">
        <link rel="stylesheet" href="css/variables.css">
        <link rel="stylesheet" href="css/general.css">
        <link rel="stylesheet" href="css/chrome.css">
        <link rel="stylesheet" href="css/print.css" media="print">

        <!-- Fonts -->
        <link rel="stylesheet" href="FontAwesome/css/font-awesome.css">
        <link rel="stylesheet" href="fonts/fonts.css">

        <!-- Highlight.js Stylesheets -->
        <link rel="stylesheet" href="highlight.css">
        <link rel="stylesheet" href="tomorrow-night.css">
        <link rel="stylesheet" href="ayu-highlight.css">

        <!-- Custom theme stylesheets -->
        <link rel="stylesheet" href="book.css">

    </head>
    <body class="sidebar-visible no-js">
    <div id="body-container">
        <!-- Provide site root to javascript -->
        <script>
            var path_to_root = "";
            var default_theme = window.matchMedia("(prefers-color-scheme: dark)").matches ? "ayu" : "dark";
        </script>

        <!-- Work around some values being stored in localStorage wrapped in quotes -->
        <script>
            try {
                var theme = localStorage.getItem('mdbook-theme');
                var sidebar = localStorage.getItem('mdbook-sidebar');

                if (theme.startsWith('"') && theme.endsWith('"')) {
                    localStorage.setItem('mdbook-theme', theme.slice(1, theme.length - 1));
                }

                if (sidebar.startsWith('"') && sidebar.endsWith('"')) {
                    localStorage.setItem('mdbook-sidebar', sidebar.slice(1, sidebar.length - 1));
                }
            } catch (e) { }
        </script>

        <!-- Set the theme before any content is loaded, prevents flash -->
        <script>
            var theme;
            try { theme = localStorage.getItem('mdbook-theme'); } catch(e) { }
            if (theme === null || theme === undefined) { theme = default_theme; }
            var html = document.querySelector('html');
            html.classList.remove('dark')
            html.classList.add(theme);
            var body = document.querySelector('body');
            body.classList.remove('no-js')
            body.classList.add('js');
        </script>

        <input type="checkbox" id="sidebar-toggle-anchor" class="hidden">

        <!-- Hide / unhide sidebar before it is displayed -->
        <script>
            var body = document.querySelector('body');
            var sidebar = null;
            var sidebar_toggle = document.getElementById("sidebar-toggle-anchor");
            if (document.body.clientWidth >= 1080) {
                try { sidebar = localStorage.getItem('mdbook-sidebar'); } catch(e) { }
                sidebar = sidebar || 'visible';
            } else {
                sidebar = 'hidden';
            }
            sidebar_toggle.checked = sidebar === 'visible';
            body.classList.remove('sidebar-visible');
            body.classList.add("sidebar-" + sidebar);
        </script>

        <nav id="sidebar" class="sidebar" aria-label="Table of contents">
            <div class="sidebar-scrollbox">
                <ol class="chapter"><li class="chapter-item expanded affix "><a href="index.html">README</a></li><li class="chapter-item expanded "><a href="src/PoolPlayground.sol/contract.PoolPlayground.html"><strong aria-hidden="true">1.</strong> PoolPlayground</a></li><li class="chapter-item expanded "><a href="src/Token.sol/contract.Token.html"><strong aria-hidden="true">2.</strong> Token</a></li></ol>
            </div>
            <div id="sidebar-resize-handle" class="sidebar-resize-handle">
                <div class="sidebar-resize-indicator"></div>
            </div>
        </nav>

        <!-- Track and set sidebar scroll position -->
        <script>
            var sidebarScrollbox = document.querySelector('#sidebar .sidebar-scrollbox');
            sidebarScrollbox.addEventListener('click', function(e) {
                if (e.target.tagName === 'A') {
                    sessionStorage.setItem('sidebar-scroll', sidebarScrollbox.scrollTop);
                }
            }, { passive: true });
            var sidebarScrollTop = sessionStorage.getItem('sidebar-scroll');
            sessionStorage.removeItem('sidebar-scroll');
            if (sidebarScrollTop) {
                // preserve sidebar scroll position when navigating via links within sidebar
                sidebarScrollbox.scrollTop = sidebarScrollTop;
            } else {
                // scroll sidebar to current active section when navigating via "next/previous chapter" buttons
                var activeSection = document.querySelector('#sidebar .active');
                if (activeSection) {
                    activeSection.scrollIntoView({ block: 'center' });
                }
            }
        </script>

        <div id="page-wrapper" class="page-wrapper">

            <div class="page">
                                <div id="menu-bar-hover-placeholder"></div>
                <div id="menu-bar" class="menu-bar sticky">
                    <div class="left-buttons">
                        <label id="sidebar-toggle" class="icon-button" for="sidebar-toggle-anchor" title="Toggle Table of Contents" aria-label="Toggle Table of Contents" aria-controls="sidebar">
                            <i class="fa fa-bars"></i>
                        </label>
                        <button id="theme-toggle" class="icon-button" type="button" title="Change theme" aria-label="Change theme" aria-haspopup="true" aria-expanded="false" aria-controls="theme-list">
                            <i class="fa fa-paint-brush"></i>
                        </button>
                        <ul id="theme-list" class="theme-popup" aria-label="Themes" role="menu">
                            <li role="none"><button role="menuitem" class="theme" id="light">Light</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="rust">Rust</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="coal">Coal</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="navy">Navy</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="ayu">Ayu</button></li>
                        </ul>
                        <button id="search-toggle" class="icon-button" type="button" title="Search. (Shortkey: s)" aria-label="Toggle Searchbar" aria-expanded="false" aria-keyshortcuts="S" aria-controls="searchbar">
                            <i class="fa fa-search"></i>
                        </button>
                    </div>

                    <h1 class="menu-title">Pool Playground</h1>

                    <div class="right-buttons">
                        <a href="print.html" title="Print this book" aria-label="Print this book">
                            <i id="print-button" class="fa fa-print"></i>
                        </a>
                        <a href="https://github.com/EridianAlpha/pool-playground" title="Git repository" aria-label="Git repository">
                            <i id="git-repository-button" class="fa fa-github"></i>
                        </a>

                    </div>
                </div>

                <div id="search-wrapper" class="hidden">
                    <form id="searchbar-outer" class="searchbar-outer">
                        <input type="search" id="searchbar" name="searchbar" placeholder="Search this book ..." aria-controls="searchresults-outer" aria-describedby="searchresults-header">
                    </form>
                    <div id="searchresults-outer" class="searchresults-outer hidden">
                        <div id="searchresults-header" class="searchresults-header"></div>
                        <ul id="searchresults">
                        </ul>
                    </div>
                </div>

                <!-- Apply ARIA attributes after the sidebar and the sidebar toggle button are added to the DOM -->
                <script>
                    document.getElementById('sidebar-toggle').setAttribute('aria-expanded', sidebar === 'visible');
                    document.getElementById('sidebar').setAttribute('aria-hidden', sidebar !== 'visible');
                    Array.from(document.querySelectorAll('#sidebar a')).forEach(function(link) {
                        link.setAttribute('tabIndex', sidebar === 'visible' ? 0 : -1);
                    });
                </script>

                <div id="content" class="content">
                    <main>
                        <h1 id="pool-playground"><a class="header" href="#pool-playground">Pool Playground</a></h1>
<ul>
<li><a href="index.html#1-overview">1. Overview</a></li>
<li><a href="index.html#2-installation">2. Installation</a>
<ul>
<li><a href="index.html#21-clone-repository">2.1. Clone repository</a></li>
<li><a href="index.html#22-install-dependencies">2.2. Install Dependencies</a></li>
<li><a href="index.html#23-create-the-env-file">2.3. Create the <code>.env</code> file</a></li>
</ul>
</li>
<li><a href="index.html#3-testing">3. Testing</a>
<ul>
<li><a href="index.html#31-tests">3.1. Tests</a></li>
<li><a href="index.html#32-coverage">3.2. Coverage</a></li>
</ul>
</li>
<li><a href="index.html#4-deployment">4. Deployment</a>
<ul>
<li><a href="index.html#41-deploying-uniswap-v2-contracts-optional">4.1. Deploying Uniswap V2 Contracts (optional)</a></li>
<li><a href="index.html#42-deploying-poolplayground-contract">4.2. Deploying PoolPlayground Contract</a></li>
</ul>
</li>
<li><a href="index.html#5-interactions">5. Interactions</a>
<ul>
<li><a href="index.html#51-deploy-playground-instance">5.1. Deploy Playground Instance</a></li>
</ul>
</li>
<li><a href="index.html#6-bugs-and-feature-requests">6. Bugs and Feature Requests</a>
<ul>
<li><a href="index.html#61-bugs">6.1. Bugs</a></li>
<li><a href="index.html#62-feature-requests">6.2. Feature Requests</a></li>
</ul>
</li>
<li><a href="index.html#7-authors">7. Authors</a></li>
<li><a href="index.html#8-license">8. License</a></li>
</ul>
<h2 id="1-overview"><a class="header" href="#1-overview">1. Overview</a></h2>
<p>An interactive educational playground for visualizing and learning Uniswap V2 mechanics by swapping testnet ERC20 tokens.</p>
<p>Learn all about Pool Playground <a href="https://pool.eridian.xyz/#about">here</a>.</p>
<p>Live on <a href="https://pool.eridian.xyz">https://pool.eridian.xyz</a></p>
<h2 id="2-installation"><a class="header" href="#2-installation">2. Installation</a></h2>
<h3 id="21-clone-repository"><a class="header" href="#21-clone-repository">2.1. Clone repository</a></h3>
<pre><code class="language-bash">git clone https://github.com/EridianAlpha/pool-playground.git
</code></pre>
<h3 id="22-install-dependencies"><a class="header" href="#22-install-dependencies">2.2. Install Dependencies</a></h3>
<p>This should happen automatically when first running a command, but the installation can be manually triggered with the following commands:</p>
<pre><code class="language-bash">git submodule init
git submodule update
make install
</code></pre>
<h3 id="23-create-the-env-file"><a class="header" href="#23-create-the-env-file">2.3. Create the <code>.env</code> file</a></h3>
<p>Use the <code>.env.example</code> file as a template to create a <code>.env</code> file.</p>
<h2 id="3-testing"><a class="header" href="#3-testing">3. Testing</a></h2>
<h3 id="31-tests"><a class="header" href="#31-tests">3.1. Tests</a></h3>
<pre><code class="language-bash">make test
make test-fork

make test-v
make test-v-fork

make test-summary
make test-summary-fork
</code></pre>
<h3 id="32-coverage"><a class="header" href="#32-coverage">3.2. Coverage</a></h3>
<pre><code class="language-bash">make coverage
make coverage-fork

make coverage-report
make coverage-report-fork
</code></pre>
<h2 id="4-deployment"><a class="header" href="#4-deployment">4. Deployment</a></h2>
<h3 id="41-deploying-uniswap-v2-contracts-optional"><a class="header" href="#41-deploying-uniswap-v2-contracts-optional">4.1. Deploying Uniswap V2 Contracts (optional)</a></h3>
<p>This step is optional and only necessary if you need to deploy the Uniswap V2 core contracts to a new chain. The Uniswap V2 core contracts have already been deployed on Mainnet (used for forks only), Holesky, Sepolia, Base Sepolia, Arbitrum Sepolia, and Optimism Sepolia chains. The addresses of these existing deployments can be found in the <code>.env.example</code> file.</p>
<p>Fork the Uniswap v2-periphery repository and modify the <code>v2-periphery/contracts/libraries/UniswapV2Library.sol</code> contract with the correct init code hash on line 24. Without changing this init code hash, the contract will not be able to calculate the correct pair address. There are a number of reasons why the init code hash changes, but the most likely reason is that the contract was deployed with a different compiler version or with different compiler settings.</p>
<p>You can try to configure your complier to match the settings of the original deployment, but this is not always possible. The best way to get the correct init code hash is to inspect the creation bytecode of the contract that you are using and manually change the init code hash.</p>
<pre><code class="language-bash"># Get the creation bytecode of the UniswapV2Pair contract
CREATION_BYTECODE=$(forge inspect lib/v2-core/contracts/UniswapV2Pair.sol:UniswapV2Pair bytecode)

# Calculate the init code hash of the UniswapV2Pair contract
cast keccak &quot;$CREATION_BYTECODE&quot;
0x0be7e5aaf721ce53efd2148867ffca974ca93687937cd12b66ab2acef87168ed

# Remove the 0x from the start and use that as the &quot;init code hash&quot;
# in `v2-periphery/contracts/libraries/UniswapV2Library.sol` line 24
0be7e5aaf721ce53efd2148867ffca974ca93687937cd12b66ab2acef87168ed

</code></pre>
<p>Once you have the correct init code hash updated in your own fork of the Uniswap v2-periphery repository, you can install it to your local environment.</p>
<pre><code class="language-bash"># Example of installing the EridianAlpha/v2-periphery repository with the modified init code hash
forge install EridianAlpha/v2-periphery --no-commit
</code></pre>
<p>After installing the modified Uniswap v2-periphery repository, you can deploy the Uniswap V2 Factory and Router02 contracts to the specified chain.</p>
<div class="table-wrapper"><table><thead><tr><th>Chain</th><th>Command</th></tr></thead><tbody>
<tr><td>Anvil</td><td><code>make deploy-uniswapV2-anvil</code></td></tr>
<tr><td>Holesky</td><td><code>make deploy-uniswapV2-ethereum-holesky</code></td></tr>
<tr><td>Sepolia</td><td><code>make deploy-uniswapV2-ethereum-sepolia</code></td></tr>
<tr><td>Base Sepolia</td><td><code>make deploy-uniswapV2-base-sepolia</code></td></tr>
<tr><td>Arbitrum Sepolia</td><td><code>make deploy-uniswapV2-arbitrum-sepolia</code></td></tr>
<tr><td>Optimism Sepolia</td><td><code>make deploy-uniswapV2-optimism-sepolia</code></td></tr>
</tbody></table>
</div>
<h3 id="42-deploying-poolplayground-contract"><a class="header" href="#42-deploying-poolplayground-contract">4.2. Deploying PoolPlayground Contract</a></h3>
<p>Deploys PoolPlayground to the specified chain.</p>
<div class="table-wrapper"><table><thead><tr><th>Chain</th><th>Command</th></tr></thead><tbody>
<tr><td>Anvil</td><td><code>make deploy anvil</code></td></tr>
<tr><td>Holesky</td><td><code>make deploy ethereum-holesky</code></td></tr>
<tr><td>Sepolia</td><td><code>make deploy ethereum-sepolia</code></td></tr>
<tr><td>Base Sepolia</td><td><code>make deploy base-sepolia</code></td></tr>
<tr><td>Arbitrum Sepolia</td><td><code>make deploy arbitrum-sepolia</code></td></tr>
<tr><td>Optimism Sepolia</td><td><code>make deploy optimism-sepolia</code></td></tr>
</tbody></table>
</div>
<h2 id="5-interactions"><a class="header" href="#5-interactions">5. Interactions</a></h2>
<p>Interactions are defined in <code>./script/Interactions.s.sol</code></p>
<p>If <code>DEPLOYED_CONTRACT_ADDRESS</code> is set in the <code>.env</code> file, that contract address will be used for interactions.
If that variable is not set, the latest deployment on the specified chain will be used.</p>
<h3 id="51-deploy-playground-instance"><a class="header" href="#51-deploy-playground-instance">5.1. Deploy Playground Instance</a></h3>
<p>Call the <code>deploy()</code> function on the PoolPlayground contract.
The input parameters are defined in the <code>Interactions.s.sol</code> script.</p>
<div class="table-wrapper"><table><thead><tr><th>Chain</th><th>Command</th></tr></thead><tbody>
<tr><td>Anvil</td><td><code>make deployPlaygroundInstance anvil</code></td></tr>
<tr><td>Holesky</td><td><code>make deployPlaygroundInstance ethereum-holesky</code></td></tr>
<tr><td>Sepolia</td><td><code>make deployPlaygroundInstance ethereum-sepolia</code></td></tr>
<tr><td>Base Sepolia</td><td><code>make deployPlaygroundInstance base-sepolia</code></td></tr>
<tr><td>Arbitrum Sepolia</td><td><code>make deployPlaygroundInstance arbitrum-sepolia</code></td></tr>
<tr><td>Optimism Sepolia</td><td><code>make deployPlaygroundInstance optimism-sepolia</code></td></tr>
</tbody></table>
</div>
<h2 id="6-bugs-and-feature-requests"><a class="header" href="#6-bugs-and-feature-requests">6. Bugs and Feature Requests</a></h2>
<p>If you encounter any bugs or have a feature request, please open an issue on GitHub. To help us resolve the issue, please provide the following information:</p>
<h3 id="61-bugs"><a class="header" href="#61-bugs">6.1. Bugs</a></h3>
<ul>
<li>A detailed description of the bug.</li>
<li>Steps to reproduce the bug.</li>
<li>Expected behavior and actual behavior.</li>
<li>Screenshots, if possible, and any additional context or information that may help us resolve the bug.</li>
<li>If you have a solution, suggestion, or code change, please submit a pull request.</li>
</ul>
<h3 id="62-feature-requests"><a class="header" href="#62-feature-requests">6.2. Feature Requests</a></h3>
<ul>
<li>For feature requests, questions, or feedback, please open an issue.</li>
<li>For security issues or general inquiries, please contact <a href="https://eridian.xyz">Eridian</a> privately.</li>
</ul>
<h2 id="7-authors"><a class="header" href="#7-authors">7. Authors</a></h2>
<ul>
<li><a href="https://eridian.xyz">Eridian</a></li>
</ul>
<h2 id="8-license"><a class="header" href="#8-license">8. License</a></h2>
<p><a href="https://choosealicense.com/licenses/mit/">MIT</a></p>
<div style="break-before: page; page-break-before: always;"></div><h1 id="poolplayground"><a class="header" href="#poolplayground">PoolPlayground</a></h1>
<p><a href="https://github.com/EridianAlpha/pool-playground/blob/64c7ef8ab2a07960b01ae9823ed6333cccdd6089/src/PoolPlayground.sol">Git Source</a></p>
<p><strong>Author:</strong>
EridianAlpha</p>
<p>An interactive educational playground for visualizing and learning
Uniswap V2 mechanics by swapping testnet ERC20 tokens.</p>
<h2 id="state-variables"><a class="header" href="#state-variables">State Variables</a></h2>
<h3 id="token_decimals"><a class="header" href="#token_decimals">TOKEN_DECIMALS</a></h3>
<pre><code class="language-solidity">uint256 public constant TOKEN_DECIMALS = 10 ** 18;
</code></pre>
<h3 id="market_price_usd"><a class="header" href="#market_price_usd">MARKET_PRICE_USD</a></h3>
<pre><code class="language-solidity">TokenAmounts public MARKET_PRICE_USD = TokenAmounts({diamond: 100, wood: 20, stone: 2});
</code></pre>
<h3 id="s_usertokens"><a class="header" href="#s_usertokens">s_userTokens</a></h3>
<pre><code class="language-solidity">mapping(address =&gt; TokenAddresses) internal s_userTokens;
</code></pre>
<h3 id="s_userinitialtokenbalances"><a class="header" href="#s_userinitialtokenbalances">s_userInitialTokenBalances</a></h3>
<pre><code class="language-solidity">mapping(address =&gt; TokenAmounts) internal s_userInitialTokenBalances;
</code></pre>
<h3 id="s_contractaddresses"><a class="header" href="#s_contractaddresses">s_contractAddresses</a></h3>
<pre><code class="language-solidity">mapping(string =&gt; address) internal s_contractAddresses;
</code></pre>
<h2 id="functions"><a class="header" href="#functions">Functions</a></h2>
<h3 id="constructor"><a class="header" href="#constructor">constructor</a></h3>
<p>Constructor to set the Uniswap contract addresses for the network.</p>
<pre><code class="language-solidity">constructor(ContractAddress[] memory _contractAddresses);
</code></pre>
<p><strong>Parameters</strong></p>
<div class="table-wrapper"><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody>
<tr><td><code>_contractAddresses</code></td><td><code>ContractAddress[]</code></td><td>An array of ContractAddress structs.</td></tr>
</tbody></table>
</div>
<h3 id="deploy"><a class="header" href="#deploy">deploy</a></h3>
<p>Deploy a new playground instance.</p>
<p><em>Overwrites any existing tokens and pools for the user.</em></p>
<pre><code class="language-solidity">function deploy(TokenAmounts calldata _userTokenAmounts, TokenAmounts[] calldata _poolTokenAmounts) public;
</code></pre>
<p><strong>Parameters</strong></p>
<div class="table-wrapper"><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody>
<tr><td><code>_userTokenAmounts</code></td><td><code>TokenAmounts</code></td><td>The amount of tokens to mint for the user.</td></tr>
<tr><td><code>_poolTokenAmounts</code></td><td><code>TokenAmounts[]</code></td><td>The amount of tokens to add to the Uniswap pools.</td></tr>
</tbody></table>
</div>
<h3 id="createtokens"><a class="header" href="#createtokens">createTokens</a></h3>
<p>Create tokens.</p>
<pre><code class="language-solidity">function createTokens(TokenAmounts memory _mintTokenAmounts) internal returns (TokenAddresses memory tokenAddresses);
</code></pre>
<p><strong>Parameters</strong></p>
<div class="table-wrapper"><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody>
<tr><td><code>_mintTokenAmounts</code></td><td><code>TokenAmounts</code></td><td>The total amount of tokens to mint.</td></tr>
</tbody></table>
</div>
<h3 id="createuniswapv2pools"><a class="header" href="#createuniswapv2pools">createUniswapV2Pools</a></h3>
<p>Create UniswapV2 pools.</p>
<pre><code class="language-solidity">function createUniswapV2Pools(TokenAddresses memory _tokenAddresses, TokenAmounts[] memory _poolTokenAmounts)
    internal;
</code></pre>
<p><strong>Parameters</strong></p>
<div class="table-wrapper"><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody>
<tr><td><code>_tokenAddresses</code></td><td><code>TokenAddresses</code></td><td>The token addresses for the user.</td></tr>
<tr><td><code>_poolTokenAmounts</code></td><td><code>TokenAmounts[]</code></td><td>The amount of tokens to add to the Uniswap pools.</td></tr>
</tbody></table>
</div>
<h3 id="createpairandaddliquidity"><a class="header" href="#createpairandaddliquidity">createPairAndAddLiquidity</a></h3>
<p>Create UniSwapV2 pair and add liquidity.</p>
<pre><code class="language-solidity">function createPairAndAddLiquidity(
    IUniswapV2Router02 uniswapV2Router,
    address tokenA,
    address tokenB,
    uint256 amountA,
    uint256 amountB
) internal;
</code></pre>
<p><strong>Parameters</strong></p>
<div class="table-wrapper"><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody>
<tr><td><code>uniswapV2Router</code></td><td><code>IUniswapV2Router02</code></td><td></td></tr>
<tr><td><code>tokenA</code></td><td><code>address</code></td><td>The address of the first token.</td></tr>
<tr><td><code>tokenB</code></td><td><code>address</code></td><td>The address of the second token.</td></tr>
<tr><td><code>amountA</code></td><td><code>uint256</code></td><td>The amount of tokenA to add to the pool.</td></tr>
<tr><td><code>amountB</code></td><td><code>uint256</code></td><td>The amount of tokenB to add to the pool.</td></tr>
</tbody></table>
</div>
<h3 id="sendremainingtokens"><a class="header" href="#sendremainingtokens">sendRemainingTokens</a></h3>
<p>Send remaining tokens to the user.</p>
<pre><code class="language-solidity">function sendRemainingTokens(TokenAddresses memory _tokenAddresses) internal;
</code></pre>
<p><strong>Parameters</strong></p>
<div class="table-wrapper"><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody>
<tr><td><code>_tokenAddresses</code></td><td><code>TokenAddresses</code></td><td>The token addresses for the user.</td></tr>
</tbody></table>
</div>
<h3 id="getcontractaddress"><a class="header" href="#getcontractaddress">getContractAddress</a></h3>
<p>Get the contract address for a given identifier.</p>
<pre><code class="language-solidity">function getContractAddress(string memory _identifier) public view returns (address);
</code></pre>
<p><strong>Parameters</strong></p>
<div class="table-wrapper"><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody>
<tr><td><code>_identifier</code></td><td><code>string</code></td><td>The identifier of the contract.</td></tr>
</tbody></table>
</div>
<h3 id="getusertokens"><a class="header" href="#getusertokens">getUserTokens</a></h3>
<p>Get the deployed tokens for a user.</p>
<pre><code class="language-solidity">function getUserTokens(address _user) public view returns (TokenAddresses memory);
</code></pre>
<p><strong>Parameters</strong></p>
<div class="table-wrapper"><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody>
<tr><td><code>_user</code></td><td><code>address</code></td><td>The address of the user.</td></tr>
</tbody></table>
</div>
<h3 id="getusertokenbalances"><a class="header" href="#getusertokenbalances">getUserTokenBalances</a></h3>
<p>Get the all the token balances for a user.</p>
<pre><code class="language-solidity">function getUserTokenBalances(address _user) public view returns (TokenAmounts memory userTokenBalances);
</code></pre>
<p><strong>Parameters</strong></p>
<div class="table-wrapper"><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody>
<tr><td><code>_user</code></td><td><code>address</code></td><td>The address of the user.</td></tr>
</tbody></table>
</div>
<p><strong>Returns</strong></p>
<div class="table-wrapper"><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody>
<tr><td><code>userTokenBalances</code></td><td><code>TokenAmounts</code></td><td>The token balances for the user.</td></tr>
</tbody></table>
</div>
<h3 id="getuserinitialtokenbalances"><a class="header" href="#getuserinitialtokenbalances">getUserInitialTokenBalances</a></h3>
<p>Get the initial token balances for a user.</p>
<pre><code class="language-solidity">function getUserInitialTokenBalances(address _user)
    public
    view
    returns (TokenAmounts memory userInitialTokenBalances);
</code></pre>
<p><strong>Parameters</strong></p>
<div class="table-wrapper"><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody>
<tr><td><code>_user</code></td><td><code>address</code></td><td>The address of the user.</td></tr>
</tbody></table>
</div>
<p><strong>Returns</strong></p>
<div class="table-wrapper"><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody>
<tr><td><code>userInitialTokenBalances</code></td><td><code>TokenAmounts</code></td><td>The initial token balances for the user.</td></tr>
</tbody></table>
</div>
<h2 id="events"><a class="header" href="#events">Events</a></h2>
<h3 id="tokensandpoolscreated"><a class="header" href="#tokensandpoolscreated">TokensAndPoolsCreated</a></h3>
<pre><code class="language-solidity">event TokensAndPoolsCreated(address indexed user);
</code></pre>
<h2 id="structs"><a class="header" href="#structs">Structs</a></h2>
<h3 id="contractaddress"><a class="header" href="#contractaddress">ContractAddress</a></h3>
<pre><code class="language-solidity">struct ContractAddress {
    string identifier;
    address contractAddress;
}
</code></pre>
<h3 id="tokenaddresses"><a class="header" href="#tokenaddresses">TokenAddresses</a></h3>
<pre><code class="language-solidity">struct TokenAddresses {
    address diamond;
    address wood;
    address stone;
}
</code></pre>
<h3 id="tokenamounts"><a class="header" href="#tokenamounts">TokenAmounts</a></h3>
<pre><code class="language-solidity">struct TokenAmounts {
    uint256 diamond;
    uint256 wood;
    uint256 stone;
}
</code></pre>
<div style="break-before: page; page-break-before: always;"></div><h1 id="token"><a class="header" href="#token">Token</a></h1>
<p><a href="https://github.com/EridianAlpha/pool-playground/blob/64c7ef8ab2a07960b01ae9823ed6333cccdd6089/src/Token.sol">Git Source</a></p>
<p><strong>Inherits:</strong>
ERC20, ERC20Permit</p>
<p><strong>Author:</strong>
EridianAlpha</p>
<p>An ERC20 token contract used in the Pool Playground project.</p>
<h2 id="state-variables-1"><a class="header" href="#state-variables-1">State Variables</a></h2>
<h3 id="preapprovedaddresses"><a class="header" href="#preapprovedaddresses">preApprovedAddresses</a></h3>
<pre><code class="language-solidity">address[] public preApprovedAddresses;
</code></pre>
<h2 id="functions-1"><a class="header" href="#functions-1">Functions</a></h2>
<h3 id="constructor-1"><a class="header" href="#constructor-1">constructor</a></h3>
<p>Constructor for the Token contract</p>
<pre><code class="language-solidity">constructor(uint256 initialMintAmount, string memory name, string memory symbol, address[] memory _preApprovedAddresses)
    ERC20(name, symbol)
    ERC20Permit(name);
</code></pre>
<p><strong>Parameters</strong></p>
<div class="table-wrapper"><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody>
<tr><td><code>initialMintAmount</code></td><td><code>uint256</code></td><td>The amount of tokens to mint to the deployer</td></tr>
<tr><td><code>name</code></td><td><code>string</code></td><td>The name of the token</td></tr>
<tr><td><code>symbol</code></td><td><code>string</code></td><td>The symbol of the token</td></tr>
<tr><td><code>_preApprovedAddresses</code></td><td><code>address[]</code></td><td>An array of addresses that are pre-approved to spend an unlimited amount of tokens</td></tr>
</tbody></table>
</div>
<h3 id="ispreapproved"><a class="header" href="#ispreapproved">isPreApproved</a></h3>
<p>Checks if an address is pre-approved to spend an unlimited amount of tokens</p>
<pre><code class="language-solidity">function isPreApproved(address spender) public view returns (bool);
</code></pre>
<p><strong>Parameters</strong></p>
<div class="table-wrapper"><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody>
<tr><td><code>spender</code></td><td><code>address</code></td><td>The address to check</td></tr>
</tbody></table>
</div>
<p><strong>Returns</strong></p>
<div class="table-wrapper"><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody>
<tr><td><code>&lt;none&gt;</code></td><td><code>bool</code></td><td><code>true</code> if the address is pre-approved, <code>false</code> otherwise</td></tr>
</tbody></table>
</div>
<h3 id="allowance"><a class="header" href="#allowance">allowance</a></h3>
<p>Overrides the <code>allowance</code> function to return <code>type(uint256).max</code> for pre-approved addresses</p>
<pre><code class="language-solidity">function allowance(address owner, address spender) public view override returns (uint256);
</code></pre>
<p><strong>Parameters</strong></p>
<div class="table-wrapper"><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody>
<tr><td><code>owner</code></td><td><code>address</code></td><td>The owner of the tokens</td></tr>
<tr><td><code>spender</code></td><td><code>address</code></td><td>The spender of the tokens</td></tr>
</tbody></table>
</div>
<p><strong>Returns</strong></p>
<div class="table-wrapper"><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody>
<tr><td><code>&lt;none&gt;</code></td><td><code>uint256</code></td><td>The allowance of the spender</td></tr>
</tbody></table>
</div>
<h3 id="approve"><a class="header" href="#approve">approve</a></h3>
<p>Overrides the <code>approve</code> function to return <code>true</code> for pre-approved addresses</p>
<pre><code class="language-solidity">function approve(address spender, uint256 amount) public override returns (bool);
</code></pre>
<p><strong>Parameters</strong></p>
<div class="table-wrapper"><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody>
<tr><td><code>spender</code></td><td><code>address</code></td><td>The spender of the tokens</td></tr>
<tr><td><code>amount</code></td><td><code>uint256</code></td><td>The amount of tokens to approve</td></tr>
</tbody></table>
</div>
<p><strong>Returns</strong></p>
<div class="table-wrapper"><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody>
<tr><td><code>&lt;none&gt;</code></td><td><code>bool</code></td><td><code>true</code> if the approval was successful, <code>false</code> otherwise</td></tr>
</tbody></table>
</div>
                    </main>

                    <nav class="nav-wrapper" aria-label="Page navigation">
                        <!-- Mobile navigation buttons -->


                        <div style="clear: both"></div>
                    </nav>
                </div>
            </div>

            <nav class="nav-wide-wrapper" aria-label="Page navigation">

            </nav>

        </div>




        <script>
            window.playground_copyable = true;
        </script>


        <script src="elasticlunr.min.js"></script>
        <script src="mark.min.js"></script>
        <script src="searcher.js"></script>

        <script src="clipboard.min.js"></script>
        <script src="highlight.js"></script>
        <script src="book.js"></script>

        <!-- Custom JS scripts -->
        <script src="solidity.min.js"></script>

        <script>
        window.addEventListener('load', function() {
            window.setTimeout(window.print, 100);
        });
        </script>

    </div>
    </body>
</html>
